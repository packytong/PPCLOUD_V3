<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ตำแหน่งจอ LED Billboard - PP Cloud Media</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="style.css?v=1.0.5" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        .locations-hero {
            background: linear-gradient(135deg, rgba(52, 58, 64, 0.9), rgba(25, 25, 25, 0.9)),
                        url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            padding: 120px 0 80px;
            color: white;
        }
        
        #map {
            height: 600px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .location-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .location-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .location-card.active {
            border: 2px solid var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.05), rgba(255, 193, 7, 0.1));
        }
        
        .province-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            background: linear-gradient(45deg, var(--warning-color), #ffb300);
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--warning-color), #ffb300);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.3);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .filter-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }
        
        .location-details {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .detail-item i {
            width: 20px;
            color: var(--warning-color);
            margin-right: 10px;
        }
        
        .search-box {
            position: relative;
        }
        
        .search-box input {
            padding-left: 45px;
            border-radius: 25px;
            border: 2px solid #e9ecef;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-broadcast-tower me-2"></i>PP Cloud Media
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#home">หน้าแรก</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#about">เกี่ยวกับเรา</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#services">บริการ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="locations.html">ตำแหน่งจอ LED</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#portfolio">ผลงาน</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#contact">ติดต่อเรา</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    

    <!-- Main Content -->
    <section class="py-5">
        <div class="container">
            <!-- Filter Section -->
            <div class="filter-section">
                <div class="row g-3">
                    <div class="col-md-4">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" class="form-control" id="searchInput" placeholder="ค้นหาจังหวัดหรือสถานที่...">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="regionFilter">
                            <option value="">เลือกภูมิภาค</option>
                            <option value="north">ภาคเหนือ</option>
                            <option value="northeast">ภาคตะวันออกเฉียงเหนือ</option>
                            <option value="central">ภาคกลาง</option>
                            <option value="east">ภาคตะวันออก</option>
                            <option value="west">ภาคตะวันตก</option>
                            <option value="south">ภาคใต้</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="provinceFilter">
                            <option value="">เลือกจังหวัด</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-warning w-100" onclick="resetFilters()">
                            <i class="fas fa-redo me-2"></i>รีเซ็ต
                        </button>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Map Column -->
                <div class="col-lg-8">
                    <h3 class="fw-bold mb-3">แผนที่ตำแหน่งจอ LED</h3>
                    <div id="map"></div>
                </div>

                <!-- Locations List Column -->
                <div class="col-lg-4">
                    <h3 class="fw-bold mb-3">รายการตำแหน่งจอ LED</h3>
                    <div id="locationsList" style="max-height: 600px; overflow-y: auto;">
                        <!-- Location cards will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Details Modal -->
    <div class="modal fade" id="locationModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title"><i class="fas fa-map-marker-alt me-2"></i>รายละเอียดตำแหน่งจอ LED</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Location details will be inserted here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
                    <button type="button" class="btn btn-warning" onclick="contactForLocation()">
                        <i class="fas fa-phone me-2"></i>ติดต่อสำรวจอ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 PP Cloud Media. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-white me-3"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="text-white"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="locations-data.js"></script>
    <script>
        // Initialize map and locations data
        let map;
        let markers = [];
        let locations = [];
        let filteredLocations = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Use locations data from external file
            if (typeof locationsData !== 'undefined') {
                locations = locationsData;
            } else {
                // Fallback sample data if external file not loaded
                locations = [
                    {
                        id: 1,
                        name: "จอ LED สยามพารากอน",
                        province: "กรุงเทพมหานคร",
                        region: "central",
                        latitude: 13.7468,
                        longitude: 100.5350,
                        size: "large",
                        dimensions: "10m x 8m",
                        showTimes: "06:00-24:00",
                        timing: "ทุก 15 นาที",
                        address: "991 ถนนพระรามที่ 1 แขวงปทุมวัน เขตปทุมวัน",
                        description: "จอ LED ขนาดใหญ่ตั้งอยู่หน้าห้างสรรพสินค้าสยามพารากอน จุดที่ผู้คนพลุกพล่านมากที่สุด"
                    }
                ];
            }
            filteredLocations = [...locations];
            initMap();
            renderLocationsList();
            setupFilters();
        });

        // Initialize map
        function initMap() {
            map = L.map('map').setView([13.7468, 100.5350], 6);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            addMarkers();
        }

        // Add markers to map
        function addMarkers() {
            // Clear existing markers
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];

            filteredLocations.forEach(location => {
                const color = getMarkerColor(location.size);
                const marker = L.circleMarker([location.latitude, location.longitude], {
                    radius: 8,
                    fillColor: color,
                    color: '#fff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);

                marker.bindPopup(`
                    <div style="min-width: 200px;">
                        <h6 style="margin: 0 0 5px 0; color: #333;">${location.name}</h6>
                        <p style="margin: 0 0 5px 0; font-size: 14px;">
                            <i class="fas fa-map-marker-alt text-warning"></i> ${location.province}<br>
                            <i class="fas fa-expand text-info"></i> ${location.dimensions}<br>
                            <i class="fas fa-clock text-success"></i> ${location.showTimes}
                        </p>
                        <button class="btn btn-sm btn-warning" onclick="showLocationDetails(${location.id})">
                            ดูรายละเอียด
                        </button>
                    </div>
                `);

                marker.locationId = location.id;
                markers.push(marker);
            });
        }

        // Get marker color based on size
        function getMarkerColor(size) {
            switch(size) {
                case 'xlarge':
                case 'large':
                    return '#34835e';
                case 'medium':
                    return '#34835e';
                case 'small':
                    return '#34835e';
                default:
                    return '#34835e';
            }
        }

        // Render locations list
        function renderLocationsList() {
            const listContainer = document.getElementById('locationsList');
            
            listContainer.innerHTML = filteredLocations.map(location => `
                <div class="location-card" data-location-id="${location.id}">
                    <div class="province-badge">${location.province}</div>
                    <h5 class="fw-bold mb-2">${location.name}</h5>
                    <div class="location-details">
                        <div class="detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${location.address}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-expand"></i>
                            <span>ขนาด: ${location.dimensions}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-clock"></i>
                            <span>ออกอากาศ: ${location.showTimes}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-tv"></i>
                            <span>Traffic: ${Number(location.viewersPerDay).toLocaleString('th-TH')}</span>
                        </div>
                    </div>
                    <button class="btn btn-sm btn-warning w-100 mt-2" onclick="showLocationDetails(${location.id})">
                        <i class="fas fa-info-circle me-2"></i>ดูรายละเอียด
                    </button>
                </div>
            `).join('');

            // Add click events to location cards
            document.querySelectorAll('.location-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.closest('button')) {
                        const locationId = parseInt(this.dataset.locationId);
                        highlightLocation(locationId);
                    }
                });
            });
        }

        // Setup filters
        function setupFilters() {
            // Populate province filter
            populateProvinceFilter();
            
            // Search filter
            document.getElementById('searchInput').addEventListener('input', function() {
                filterLocations();
            });

            // Region filter
            document.getElementById('regionFilter').addEventListener('change', function() {
                updateProvinceFilter();
                filterLocations();
            });

            // Province filter
            document.getElementById('provinceFilter').addEventListener('change', function() {
                filterLocations();
            });
        }

        // Populate province filter
        function populateProvinceFilter() {
            const provinceFilter = document.getElementById('provinceFilter');
            const provinces = [...new Set(locations.map(loc => loc.province))].sort();
            
            provinces.forEach(province => {
                const option = document.createElement('option');
                option.value = province;
                option.textContent = province;
                provinceFilter.appendChild(option);
            });
        }

        // Update province filter based on selected region
        function updateProvinceFilter() {
            const selectedRegion = document.getElementById('regionFilter').value;
            const provinceFilter = document.getElementById('provinceFilter');
            
            // Clear current options
            provinceFilter.innerHTML = '<option value="">เลือกจังหวัด</option>';
            
            if (selectedRegion) {
                // Filter provinces by selected region
                const filteredProvinces = [...new Set(
                    locations
                        .filter(loc => loc.region === selectedRegion)
                        .map(loc => loc.province)
                )].sort();
                
                filteredProvinces.forEach(province => {
                    const option = document.createElement('option');
                    option.value = province;
                    option.textContent = province;
                    provinceFilter.appendChild(option);
                });
            } else {
                // Show all provinces
                populateProvinceFilter();
            }
            
            // Reset province selection
            provinceFilter.value = '';
        }

        // Filter locations
        function filterLocations() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedRegion = document.getElementById('regionFilter').value;
            const selectedProvince = document.getElementById('provinceFilter').value;

            filteredLocations = locations.filter(location => {
                const matchesSearch = !searchTerm || 
                    location.name.toLowerCase().includes(searchTerm) ||
                    location.province.toLowerCase().includes(searchTerm) ||
                    location.address.toLowerCase().includes(searchTerm);

                const matchesRegion = !selectedRegion || location.region === selectedRegion;
                const matchesProvince = !selectedProvince || location.province === selectedProvince;

                return matchesSearch && matchesRegion && matchesProvince;
            });

            renderLocationsList();
            addMarkers();
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('regionFilter').value = '';
            document.getElementById('provinceFilter').value = '';
            
            // Reset province filter to show all provinces
            populateProvinceFilter();
            
            filteredLocations = [...locations];
            renderLocationsList();
            addMarkers();
        }

        // Highlight location on map
        function highlightLocation(locationId) {
            const location = locations.find(l => l.id === locationId);
            if (location) {
                // Remove active class from all cards
                document.querySelectorAll('.location-card').forEach(card => {
                    card.classList.remove('active');
                });
                
                // Add active class to selected card
                document.querySelector(`[data-location-id="${locationId}"]`).classList.add('active');
                
                // Center map on location
                map.setView([location.latitude, location.longitude], 15);
                
                // Open popup
                const marker = markers.find(m => m.locationId === locationId);
                if (marker) {
                    marker.openPopup();
                }
            }
        }

        // Show location details in modal
        function showLocationDetails(locationId) {
            const location = locations.find(l => l.id === locationId);
            if (location) {
                const modalBody = document.getElementById('modalBody');
                modalBody.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <img src="https://via.placeholder.com/400x300" alt="${location.name}" class="img-fluid rounded">
                        </div>
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3">${location.name}</h5>
                            <div class="detail-item">
                                <i class="fas fa-map-marker-alt text-warning"></i>
                                <strong>จังหวัด:</strong> ${location.province}
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-home text-info"></i>
                                <strong>ที่อยู่:</strong> ${location.address}
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-expand text-success"></i>
                                <strong>ขนาด:</strong> ${location.dimensions}
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-clock text-primary"></i>
                                <strong>เวลาออกอากาศ:</strong> ${location.showTimes}
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-tv text-secondary"></i>
                                <strong>รอบการออกอากาศ:</strong> ${location.timing}
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h6 class="fw-bold">รายละเอียดเพิ่มเติม:</h6>
                        <p>${location.description}</p>
                    </div>
                    <div class="mt-3">
                        <div id="modalMap" style="height: 300px; border-radius: 10px;"></div>
                    </div>
                `;
                
                // Show modal
                const modal = new bootstrap.Modal(document.getElementById('locationModal'));
                modal.show();
                
                // Initialize modal map after modal is shown
                modal._element.addEventListener('shown.bs.modal', function () {
                    const modalMap = L.map('modalMap').setView([location.latitude, location.longitude], 16);
                    
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '© OpenStreetMap contributors'
                    }).addTo(modalMap);
                    
                    L.marker([location.latitude, location.longitude])
                        .addTo(modalMap)
                        .bindPopup(location.name)
                        .openPopup();
                }, { once: true });
            }
        }

        // Contact for location
        function contactForLocation() {
            // Close modal and redirect to contact page
            const modal = bootstrap.Modal.getInstance(document.getElementById('locationModal'));
            modal.hide();
            
            setTimeout(() => {
                window.location.href = 'index.html#contact';
            }, 500);
        }
    </script>
</body>
</html>
